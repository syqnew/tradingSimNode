extends layout
block content
  div(class='container')
    div(class='jumbotron') 
      div(class='row lead', id='adminView')
        div(class='col-md-2')
          label Year 1 Event
            select(class='form-control lead' id='year1')
              option X
              option Y
              option Z
        div(class='col-md-2')
          label Year 2 Event
            select(class='form-control lead' id='year2')
              option X
              option Y
              option Z
        div(class='col-md-3')
          label Duration (in minutes)
            select(class='form-control' id='duration')
              option(value='1') 1
              option(value='2') 2
              option(value='3') 3
              option(value='4') 4
              option(value='5') 5
              option(value='6') 6
              option(value='7') 7
              option(value='8') 8
              option(value='9') 9
              option(value='10') 10
      div(class='row lead')
        div(class='col-md-1')
          button(type='button' class='btn btn-primary' id='startPeriodButton') Start Year 1

      div(class='row' id='timer')

      script(id='timer-template' type='text/x-handlebars-template')
        p {{minutes}}m {{seconds}}s

      script(src='//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js')

      script(type='text/javascript').
        _timerTemplate = Handlebars.compile($('#timer-template').html());

        $('#startPeriodButton').click(function() {
          var duration = $('#duration').val();
          var timeLeft = duration * 60 * 1000;

          var timerId = setInterval(function(){
            if (timeLeft > 0) { 
              timeLeft -= 1000;
            } else {
              clearInterval(timerId);
              $('button').prop('disabled', true);
              year = 2;
            }
            var minutes = Math.floor(timeLeft / (60 * 1000));
            var seconds = Math.floor((timeLeft - (minutes * 60 * 1000)) / 1000);

            $('#timer').html(_timerTemplate( { minutes: minutes, seconds: seconds } ));
          },1000);
        });

        