extends layout
block content
  script(src='../javascripts/trader.js')
  script(src='//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js')

  div(class='container')
    div(class='jumbotron') 

      div(class='row lead', id='traderView')
        script(id='traderInfo-template' type='text/x-handlebars-template')
          div(class='col-md-3')
            p First Name
            input(type='text', class='form-control lead', id='nameInput', placholder='e.g. Stephanie')
            p Email
            input(type='email', class='form-control lead', id='emailInput', placholder='e.g. pandas@gmail.com')
            a(class='btn btn-success', id='submitBtn') Next

        script(id='trade-template' type='text/x-handlebars-template')
          div(class='container', id='traderView')
            div(class='row lead')
              div(class='col-md-8')
                p Graph
              div(class='col-md-4')
                div(class='row')
                  p Order Form 
                  p Canceling Orders
            div(class='row lead')
              div(class='col-md-8')
                p Portfolio Info
              div(class='col-md-4')
                div(class='row')
                  p Transaction history


    script(src='/socket.io/socket.io.js')
    script(type='text/javascript').
      _traderInfoTemplate = Handlebars.compile($('#traderInfo-template').html());
      _tradeTemplate = Handlebars.compile($('#trade-template').html());

      $('#traderView').html(_traderInfoTemplate);
      
      var socket = new Socket()

      $('#submitBtn').click( function() {
        if ( $('#nameInput').val().length > 0 && $('#emailInput').val().length > 0 ) {
          socket.connectToServer($('#nameInput').val(), $('#emailInput').val(), function(data, err) {
            $('#traderView').html(_tradeTemplate);
          });
        }
      });
   